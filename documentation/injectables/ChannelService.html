<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>dabubble documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>
          <script>
               // Blocking script to avoid flickering dark mode
               // Dark mode toggle button
               var useDark = window.matchMedia('(prefers-color-scheme: dark)');
               var darkModeState = useDark.matches;
               var $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               var $darkModeToggles = document.querySelectorAll('.dark-mode-switch');
               var darkModeStateLocal = localStorage.getItem('compodoc_darkmode-state');

               function checkToggle(check) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].checked = check;
                    }
               }

               function toggleDarkMode(state) {
                    if (window.localStorage) {
                         localStorage.setItem('compodoc_darkmode-state', state);
                    }

                    checkToggle(state);

                    const hasClass = document.body.classList.contains('dark');

                    if (state) {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.add('dark');
                         }
                         if (!hasClass) {
                              document.body.classList.add('dark');
                         }
                    } else {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.remove('dark');
                         }
                         if (hasClass) {
                              document.body.classList.remove('dark');
                         }
                    }
               }

               useDark.addEventListener('change', function (evt) {
                    toggleDarkMode(evt.matches);
               });
               if (darkModeStateLocal) {
                    darkModeState = darkModeStateLocal === 'true';
               }
               toggleDarkMode(darkModeState);
          </script>

        <div class="navbar navbar-default navbar-fixed-top d-md-none p-0">
               <div class="d-flex">
                    <a href="../" class="navbar-brand">dabubble documentation</a>
                    <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
               </div>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="d-none d-md-block menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">








<ol class="breadcrumb">
  <li class="breadcrumb-item">Injectables</li>
  <li class="breadcrumb-item" >ChannelService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" 
                class="nav-link"
                class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" 
                class="nav-link"
                
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/channel.service.ts</code>
        </p>


            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>ChannelService handles the creation, retrieval, and updates of channels
within the Firestore database. It also tracks membership changes and
local channel state via BehaviorSubjects.</p>

            </p>



            <section data-compodoc="block-index">
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#channelSource" >channelSource</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#channelsSource" >channelsSource</a>
                            </li>
                            <li>
                                <a href="#currentChannel" >currentChannel</a>
                            </li>
                            <li>
                                <a href="#currentChannels" >currentChannels</a>
                            </li>
                            <li>
                                <a href="#currentMembers" >currentMembers</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#membersSource" >membersSource</a>
                            </li>
                            <li>
                                <a href="#selectedChannel" >selectedChannel</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#selectedChannelSource" >selectedChannelSource</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#addChannel" >addChannel</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#applyChannelEdits" >applyChannelEdits</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#buildChannelsByNameQuery" >buildChannelsByNameQuery</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#buildNewChannelObj" >buildNewChannelObj</a>
                            </li>
                            <li>
                                <a href="#changeChannel" >changeChannel</a>
                            </li>
                            <li>
                                <a href="#changeSelectedChannel" >changeSelectedChannel</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#channelNameExists" >channelNameExists</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#combineOldAndNew" >combineOldAndNew</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#createChannelDoc" >createChannelDoc</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#deleteChannel" >deleteChannel</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#ensureCreatorInChannel" >ensureCreatorInChannel</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#executeChannelsByNameQuery" >executeChannelsByNameQuery</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#filterOutLeavingUser" >filterOutLeavingUser</a>
                            </li>
                            <li>
                                <a href="#getAllChannels" >getAllChannels</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getAllChannelsOnce" >getAllChannelsOnce</a>
                            </li>
                            <li>
                                <a href="#getAllMessagesLive" >getAllMessagesLive</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getChannelById" >getChannelById</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getChannelMessagesLive" >getChannelMessagesLive</a>
                            </li>
                            <li>
                                <a href="#getChannels" >getChannels</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getChannelsByName" >getChannelsByName</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getLastUsedEmojis" >getLastUsedEmojis</a>
                            </li>
                            <li>
                                <a href="#getMembers" >getMembers</a>
                            </li>
                            <li>
                                <a href="#getMessages" >getMessages</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getUsersByFirstLetter" >getUsersByFirstLetter</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#handleChannelLeaving" >handleChannelLeaving</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#leaveChannel" >leaveChannel</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#listenChannelsLive" >listenChannelsLive</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#mergeAndSaveMembers" >mergeAndSaveMembers</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#persistChannelEdits" >persistChannelEdits</a>
                            </li>
                            <li>
                                <a href="#removeChannelLocally" >removeChannelLocally</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#saveLastUsedEmojis" >saveLastUsedEmojis</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#setMembers" >setMembers</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#updateChannel" >updateChannel</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#updateCurrentChannelIfNeeded" >updateCurrentChannelIfNeeded</a>
                            </li>
                            <li>
                                <a href="#updateLocalChannels" >updateLocalChannels</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#updateMessage" >updateMessage</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section data-compodoc="block-constructor">
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(firestore: Firestore, userService: <a href="../injectables/UserService.html" target="_self">UserService</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="94" class="link-to-prism">src/app/channel.service.ts:94</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Constructs the ChannelService, injecting Firestore for DB access and UserService to fetch user info.</p>
</div>
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>firestore</td>
                                                  
                                                        <td>
                                                                    <code>Firestore</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <ul>
<li>The Firestore instance for DB operations.</li>
</ul>

                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>userService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/UserService.html" target="_self" >UserService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <ul>
<li>The UserService providing user-related data and utilities.</li>
</ul>

                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section data-compodoc="block-methods">
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addChannel"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>addChannel</b></span>
                        <a href="#addChannel"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>addChannel(channel: literal type)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="109"
                                    class="link-to-prism">src/app/channel.service.ts:109</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>addChannel creates a new channel in Firestore, storing both &#39;members&#39; and &#39;membersUid&#39; (UID array).
After creation, it calls loadChannels to refresh local state and sets the newly created channel as current.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>channel</td>
                                            <td>
                                                        <code>literal type</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The channel object containing name, members, and optional description/createdBy fields.</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="applyChannelEdits"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>applyChannelEdits</b></span>
                        <a href="#applyChannelEdits"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>applyChannelEdits(channels: any[], index: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, newName: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, desc: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="363"
                                    class="link-to-prism">src/app/channel.service.ts:363</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Updates the in-memory channel object with the new name and description.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>channels</td>
                                            <td>
                                                        <code>any[]</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>index</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>newName</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>desc</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="buildChannelsByNameQuery"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>buildChannelsByNameQuery</b></span>
                        <a href="#buildChannelsByNameQuery"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>buildChannelsByNameQuery(channelName: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, userId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="598"
                                    class="link-to-prism">src/app/channel.service.ts:598</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Builds the Firestore query for channels matching the given channelName and containing the current user.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>channelName</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>userId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="buildNewChannelObj"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>buildNewChannelObj</b></span>
                        <a href="#buildNewChannelObj"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>buildNewChannelObj(channel: literal type, id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="167"
                                    class="link-to-prism">src/app/channel.service.ts:167</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Builds a local channel object with an &#39;id&#39; property included.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>channel</td>
                                            <td>
                                                        <code>literal type</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>id</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>{ membersUid: any; name: string; members: {}; description?: string; createdBy?: string; id: string; }</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="changeChannel"></a>
                    <span class="name">
                        <span ><b>changeChannel</b></span>
                        <a href="#changeChannel"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>changeChannel(channel: literal type)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="400"
                                    class="link-to-prism">src/app/channel.service.ts:400</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>changeChannel updates the channelSource, effectively indicating the user is working
with this channel as the &quot;current&quot; channel.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>channel</td>
                                            <td>
                                                        <code>literal type</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="changeSelectedChannel"></a>
                    <span class="name">
                        <span ><b>changeSelectedChannel</b></span>
                        <a href="#changeSelectedChannel"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>changeSelectedChannel(channel: literal type)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="386"
                                    class="link-to-prism">src/app/channel.service.ts:386</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>changeSelectedChannel updates a separate BehaviorSubject for a &quot;selected channel.&quot;</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>channel</td>
                                            <td>
                                                        <code>literal type</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="channelNameExists"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>channelNameExists</b></span>
                        <a href="#channelNameExists"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>channelNameExists(name: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="688"
                                    class="link-to-prism">src/app/channel.service.ts:688</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Checks if a channel with the specified name already exists in Firestore.
Returns true if at least one document has this name.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>name</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <p>The channel name to check.</p>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;boolean&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="combineOldAndNew"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>combineOldAndNew</b></span>
                        <a href="#combineOldAndNew"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>combineOldAndNew(oldMembers: any[], newMembers: any[])</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="293"
                                    class="link-to-prism">src/app/channel.service.ts:293</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Combines old and new members without duplicates, based on the &#39;uid&#39; field.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>oldMembers</td>
                                            <td>
                                                        <code>any[]</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>newMembers</td>
                                            <td>
                                                        <code>any[]</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>any[]</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="createChannelDoc"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>createChannelDoc</b></span>
                        <a href="#createChannelDoc"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>createChannelDoc(channel: literal type)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="155"
                                    class="link-to-prism">src/app/channel.service.ts:155</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Creates the channel document in Firestore and returns the DocumentReference.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>channel</td>
                                            <td>
                                                        <code>literal type</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="deleteChannel"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>deleteChannel</b></span>
                        <a href="#deleteChannel"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>deleteChannel(channelId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="521"
                                    class="link-to-prism">src/app/channel.service.ts:521</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>deleteChannel removes a channel document from Firestore and updates local state,
typically used when a channel is no longer needed or an admin removes it.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>channelId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The channel doc ID to delete.</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="ensureCreatorInChannel"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>ensureCreatorInChannel</b></span>
                        <a href="#ensureCreatorInChannel"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>ensureCreatorInChannel(channel: literal type)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="138"
                                    class="link-to-prism">src/app/channel.service.ts:138</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>ensureCreatorInChannel checks if the current user (creator) is already in the channel&#39;s members list.
If not, it loads the user&#39;s data from Firestore and pushes that user object into channel.members.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>channel</td>
                                            <td>
                                                        <code>literal type</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The partial channel object that might or might not contain the current user.</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="executeChannelsByNameQuery"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>executeChannelsByNameQuery</b></span>
                        <a href="#executeChannelsByNameQuery"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>executeChannelsByNameQuery(q: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="609"
                                    class="link-to-prism">src/app/channel.service.ts:609</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Executes the query and maps the results to an array of channel objects.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>q</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;any[]&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="filterOutLeavingUser"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>filterOutLeavingUser</b></span>
                        <a href="#filterOutLeavingUser"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>filterOutLeavingUser(channelData: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, userId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="227"
                                    class="link-to-prism">src/app/channel.service.ts:227</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Filters the leaving user out of the existing members and membersUid arrays.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>channelData</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>userId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>literal type</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getAllChannels"></a>
                    <span class="name">
                        <span ><b>getAllChannels</b></span>
                        <a href="#getAllChannels"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getAllChannels(callback: (channels: any[]) => void)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="536"
                                    class="link-to-prism">src/app/channel.service.ts:536</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>getAllChannels sets up a live snapshot listener on the channels collection,
firing a callback whenever there&#39;s a change in Firestore&#39;s channels data.
Returns an unsubscribe function to end the snapshot subscription.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>callback</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/function" target="_blank" >function</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The function to call with the updated array of channels.</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getAllChannelsOnce"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>getAllChannelsOnce</b></span>
                        <a href="#getAllChannelsOnce"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getAllChannelsOnce()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="670"
                                    class="link-to-prism">src/app/channel.service.ts:670</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Retrieves all channels from Firestore in which the current user is a member,
returning an array of channel objects once (no realtime updates).</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;any[]&gt;</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getAllMessagesLive"></a>
                    <span class="name">
                        <span ><b>getAllMessagesLive</b></span>
                        <a href="#getAllMessagesLive"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getAllMessagesLive(callback: (messages: any[]) => void)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="652"
                                    class="link-to-prism">src/app/channel.service.ts:652</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>getAllMessagesLive sets up a snapshot listener on the &#39;messages&#39; collection,
ordered by ascending timestamp, calling the provided callback with updated messages.
Returns an unsubscribe function to end the snapshot.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>callback</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/function" target="_blank" >function</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The function that receives the new array of messages upon updates.</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getChannelById"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>getChannelById</b></span>
                        <a href="#getChannelById"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getChannelById(channelId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="574"
                                    class="link-to-prism">src/app/channel.service.ts:574</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>getChannelById retrieves one channel document by ID from Firestore.
Throws an error if the channel doesn&#39;t exist.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>channelId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The Firestore doc ID of the channel.</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;any&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getChannelMessagesLive"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>getChannelMessagesLive</b></span>
                        <a href="#getChannelMessagesLive"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getChannelMessagesLive(channelId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="700"
                                    class="link-to-prism">src/app/channel.service.ts:700</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Returns a live observable of messages for the given channelId
from the top-level &#39;messages&#39; collection, ordered by ascending timestamp.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>channelId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <p>The ID of the channel to observe.</p>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Observable&lt;any[]&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getChannels"></a>
                    <span class="name">
                        <span ><b>getChannels</b></span>
                        <a href="#getChannels"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getChannels()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="413"
                                    class="link-to-prism">src/app/channel.service.ts:413</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>getChannels returns the latest cached channel array from channelsSource synchronously.</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>literal type[]</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getChannelsByName"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>getChannelsByName</b></span>
                        <a href="#getChannelsByName"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getChannelsByName(channelName: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="590"
                                    class="link-to-prism">src/app/channel.service.ts:590</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>getChannelsByName runs a Firestore query to find channels whose names start with
the given channelName, also ensuring that the current user is in the &#39;membersUid&#39;.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>channelName</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The partial or full string of the channel name to search.</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;any[]&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getLastUsedEmojis"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>getLastUsedEmojis</b></span>
                        <a href="#getLastUsedEmojis"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getLastUsedEmojis(channelId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, type: "sent" | "received")</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="497"
                                    class="link-to-prism">src/app/channel.service.ts:497</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>getLastUsedEmojis retrieves either the &#39;sent&#39; or &#39;received&#39; last-used emojis array
from a given channel doc in Firestore.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>channelId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The channel doc ID.</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>type</td>
                                            <td>
                                                        <code>&quot;sent&quot; | &quot;received&quot;</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>&#39;sent&#39; or &#39;received&#39; to select which field to read.</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;[] | undefined&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getMembers"></a>
                    <span class="name">
                        <span ><b>getMembers</b></span>
                        <a href="#getMembers"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getMembers()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="425"
                                    class="link-to-prism">src/app/channel.service.ts:425</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>getMembers returns the latest list of members from membersSource.</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>any[]</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getMessages"></a>
                    <span class="name">
                        <span ><b>getMessages</b></span>
                        <a href="#getMessages"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getMessages(channelId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="434"
                                    class="link-to-prism">src/app/channel.service.ts:434</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>getMessages returns an observable that streams the messages for a given channel
ordered by ascending timestamp.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>channelId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The Firestore channel ID to load messages from.</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Observable&lt;any[]&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getUsersByFirstLetter"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>getUsersByFirstLetter</b></span>
                        <a href="#getUsersByFirstLetter"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getUsersByFirstLetter(firstLetter: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="626"
                                    class="link-to-prism">src/app/channel.service.ts:626</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>getUsersByFirstLetter queries the &#39;users&#39; collection in Firestore for user documents
whose names start with the provided letter, returning them as an array.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>firstLetter</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The character or string to filter by (e.g. &#39;A&#39;).</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;any[]&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="handleChannelLeaving"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>handleChannelLeaving</b></span>
                        <a href="#handleChannelLeaving"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>handleChannelLeaving(channelData: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, channelDocRef: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, channelId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, userId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="205"
                                    class="link-to-prism">src/app/channel.service.ts:205</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Processes the logic of leaving a channel or deleting it if empty.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>channelData</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>channelDocRef</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>channelId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>userId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="leaveChannel"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>leaveChannel</b></span>
                        <a href="#leaveChannel"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>leaveChannel(channelId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, userId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="188"
                                    class="link-to-prism">src/app/channel.service.ts:188</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>leaveChannel allows the current user to remove themselves from a channel&#39;s membership list.
If no members remain, the channel is deleted. This also updates Firestore fields &#39;members&#39;
and &#39;membersUid&#39;.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>channelId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The unique ID of the channel in Firestore.</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>userId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The UID of the user leaving the channel.</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="listenChannelsLive"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>listenChannelsLive</b></span>
                        <a href="#listenChannelsLive"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>listenChannelsLive(callback: (channels: any[]) => void)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="557"
                                    class="link-to-prism">src/app/channel.service.ts:557</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Sets up a realtime listener on the &#39;channels&#39; collection in Firestore.
Whenever documents in this collection are created, updated, or deleted,
the provided callback function is invoked with the updated list of channels.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>callback</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/function" target="_blank" >function</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>A function that receives the current channel array on each Firestore update.</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                <ul>
<li>A function that, when called, unsubscribes from the Firestore listener.</li>
</ul>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="mergeAndSaveMembers"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>mergeAndSaveMembers</b></span>
                        <a href="#mergeAndSaveMembers"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>mergeAndSaveMembers(channelId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, newMembers: any[], channels: any[], channelIndex: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="267"
                                    class="link-to-prism">src/app/channel.service.ts:267</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Merges old and new members, updates Firestore, and refreshes local state.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>channelId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>newMembers</td>
                                            <td>
                                                        <code>any[]</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>channels</td>
                                            <td>
                                                        <code>any[]</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>channelIndex</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="persistChannelEdits"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>persistChannelEdits</b></span>
                        <a href="#persistChannelEdits"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>persistChannelEdits(channelId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, newName: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, desc: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="374"
                                    class="link-to-prism">src/app/channel.service.ts:374</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Persists the channel edits in Firestore using updateDoc.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>channelId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>newName</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>desc</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="removeChannelLocally"></a>
                    <span class="name">
                        <span ><b>removeChannelLocally</b></span>
                        <a href="#removeChannelLocally"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>removeChannelLocally(channelId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="322"
                                    class="link-to-prism">src/app/channel.service.ts:322</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>removeChannelLocally removes a channel from the local channelsSource by its ID,
useful after a channel has been deleted or the user has left it.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>channelId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The ID of the channel to remove.</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="saveLastUsedEmojis"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>saveLastUsedEmojis</b></span>
                        <a href="#saveLastUsedEmojis"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>saveLastUsedEmojis(channelId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, lastUsedEmojis: string[], type: "sent" | "received")</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="472"
                                    class="link-to-prism">src/app/channel.service.ts:472</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>saveLastUsedEmojis stores an array of last-used emojis in Firestore under either
&#39;lastUsedEmojisSent&#39; or &#39;lastUsedEmojisReceived&#39; for the given channel.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>channelId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The Firestore doc ID of the channel.</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>lastUsedEmojis</td>
                                            <td>
                                                        <code>string[]</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>An array of emoji strings (short or native).</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>type</td>
                                            <td>
                                                        <code>&quot;sent&quot; | &quot;received&quot;</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>Either &#39;sent&#39; or &#39;received&#39;, indicating which field to update.</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="setMembers"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>setMembers</b></span>
                        <a href="#setMembers"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>setMembers(channelId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, newMembers: any[])</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="252"
                                    class="link-to-prism">src/app/channel.service.ts:252</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>setMembers merges new members with the existing membership in Firestore, updating
both the &#39;members&#39; array of objects and the &#39;membersUid&#39; array of UIDs. The local
channels list is also updated to reflect these changes.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>channelId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The ID of the channel in Firestore.</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>newMembers</td>
                                            <td>
                                                        <code>any[]</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>An array of the new members to add to the channel.</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateChannel"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>updateChannel</b></span>
                        <a href="#updateChannel"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>updateChannel(channelId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, newChannelName: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, description: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="344"
                                    class="link-to-prism">src/app/channel.service.ts:344</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>updateChannel modifies the name and description of a specific channel in Firestore,
also updating local state in channelsSource.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>channelId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The Firestore doc ID for the channel.</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>newChannelName</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The updated channel name.</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>description</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The updated channel description.</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateCurrentChannelIfNeeded"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>updateCurrentChannelIfNeeded</b></span>
                        <a href="#updateCurrentChannelIfNeeded"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>updateCurrentChannelIfNeeded(channelId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, updatedMembers: any[])</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="306"
                                    class="link-to-prism">src/app/channel.service.ts:306</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>If the current channel is the same as channelId, refresh its members locally.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>channelId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>updatedMembers</td>
                                            <td>
                                                        <code>any[]</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateLocalChannels"></a>
                    <span class="name">
                        <span ><b>updateLocalChannels</b></span>
                        <a href="#updateLocalChannels"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>updateLocalChannels(updatedChannels: any[])</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="333"
                                    class="link-to-prism">src/app/channel.service.ts:333</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>updateLocalChannels overwrites the local channels array with a given array of channels.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>updatedChannels</td>
                                            <td>
                                                        <code>any[]</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The new array of channels to store in channelsSource.</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateMessage"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>updateMessage</b></span>
                        <a href="#updateMessage"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>updateMessage(channelId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, messageId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, updatedContent: literal type)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="451"
                                    class="link-to-prism">src/app/channel.service.ts:451</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>updateMessage allows editing the &#39;content&#39; of a message in Firestore for a specific channel.
The message doc is found by messageId, and updated content is stored alongside an edited timestamp.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>channelId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The channel&#39;s ID (used for logs/validation).</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>messageId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The Firestore doc ID of the message to update.</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>updatedContent</td>
                                            <td>
                                                        <code>literal type</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The new text/image/emoji content to store.</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section data-compodoc="block-properties">
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="channelSource"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>channelSource</b></span>
                        <a href="#channelSource"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new BehaviorSubject&lt;{
    id: string;
    name: string;
    members: any[];
    description?: string;
    createdBy?: string;
    membersUid?: string[];
  } | null&gt;(null)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="42" class="link-to-prism">src/app/channel.service.ts:42</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>A BehaviorSubject to store the current channel object (if selected by the user).</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="channelsSource"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>channelsSource</b></span>
                        <a href="#channelsSource"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new BehaviorSubject&lt;
    {
      id: string;
      name: string;
      members: any[];
      description?: string;
      createdBy?: string;
      membersUid?: string[];
    }[]
  &gt;([])</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="84" class="link-to-prism">src/app/channel.service.ts:84</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>A BehaviorSubject tracking the list of all channels in Firestore, used as local cache/state.</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="currentChannel"></a>
                    <span class="name">
                        <span ><b>currentChannel</b></span>
                        <a href="#currentChannel"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.channelSource.asObservable()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="55" class="link-to-prism">src/app/channel.service.ts:55</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>currentChannel is an observable derived from channelSource, allowing components to subscribe
to real-time changes in the currently selected channel.</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="currentChannels"></a>
                    <span class="name">
                        <span ><b>currentChannels</b></span>
                        <a href="#currentChannels"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.channelsSource.asObservable()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="94" class="link-to-prism">src/app/channel.service.ts:94</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="currentMembers"></a>
                    <span class="name">
                        <span ><b>currentMembers</b></span>
                        <a href="#currentMembers"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.membersSource.asObservable()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="79" class="link-to-prism">src/app/channel.service.ts:79</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="membersSource"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>membersSource</b></span>
                        <a href="#membersSource"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new BehaviorSubject&lt;any[]&gt;([])</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="78" class="link-to-prism">src/app/channel.service.ts:78</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>A BehaviorSubject to share membership data (an array of members) among interested components.</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="selectedChannel"></a>
                    <span class="name">
                        <span ><b>selectedChannel</b></span>
                        <a href="#selectedChannel"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.selectedChannelSource.asObservable()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="73" class="link-to-prism">src/app/channel.service.ts:73</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>selectedChannel is an observable for the &quot;selected&quot; channel, which can be used to track
channel data separately from currentChannel if the application logic demands.</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="selectedChannelSource"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>selectedChannelSource</b></span>
                        <a href="#selectedChannelSource"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new BehaviorSubject&lt;{
    id: string;
    name: string;
    members: any[];
    description?: string;
    createdBy?: string;
    membersUid?: string[];
  } | null&gt;(null)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="60" class="link-to-prism">src/app/channel.service.ts:60</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>A BehaviorSubject to store a separately &quot;selected&quot; channel (can differ from currentChannel).</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable } from &#x27;@angular/core&#x27;;
import { BehaviorSubject, Observable } from &#x27;rxjs&#x27;;
import {
  Firestore,
  collection,
  addDoc,
  getDocs,
  doc,
  updateDoc,
  query,
  where,
  collectionData,
  getDoc,
  deleteDoc,
  onSnapshot,
  orderBy,
  serverTimestamp,
} from &#x27;@angular/fire/firestore&#x27;;
import { UserService } from &#x27;./user.service&#x27;;

/**
 * ChannelService handles the creation, retrieval, and updates of channels
 * within the Firestore database. It also tracks membership changes and
 * local channel state via BehaviorSubjects.
 */
@Injectable({
  providedIn: &#x27;root&#x27;,
})
export class ChannelService {
  /**
   * A BehaviorSubject to store the current channel object (if selected by the user).
   */
  private channelSource &#x3D; new BehaviorSubject&lt;{
    id: string;
    name: string;
    members: any[];
    description?: string;
    createdBy?: string;
    membersUid?: string[];
  } | null&gt;(null);

  /**
   * currentChannel is an observable derived from channelSource, allowing components to subscribe
   * to real-time changes in the currently selected channel.
   */
  currentChannel &#x3D; this.channelSource.asObservable();

  /**
   * A BehaviorSubject to store a separately &quot;selected&quot; channel (can differ from currentChannel).
   */
  private selectedChannelSource &#x3D; new BehaviorSubject&lt;{
    id: string;
    name: string;
    members: any[];
    description?: string;
    createdBy?: string;
    membersUid?: string[];
  } | null&gt;(null);

  /**
   * selectedChannel is an observable for the &quot;selected&quot; channel, which can be used to track
   * channel data separately from currentChannel if the application logic demands.
   */
  selectedChannel &#x3D; this.selectedChannelSource.asObservable();

  /**
   * A BehaviorSubject to share membership data (an array of members) among interested components.
   */
  private membersSource &#x3D; new BehaviorSubject&lt;any[]&gt;([]);
  currentMembers &#x3D; this.membersSource.asObservable();

  /**
   * A BehaviorSubject tracking the list of all channels in Firestore, used as local cache/state.
   */
  private channelsSource &#x3D; new BehaviorSubject&lt;
    {
      id: string;
      name: string;
      members: any[];
      description?: string;
      createdBy?: string;
      membersUid?: string[];
    }[]
  &gt;([]);
  currentChannels &#x3D; this.channelsSource.asObservable();

  /**
   * Constructs the ChannelService, injecting Firestore for DB access and UserService to fetch user info.
   * @param firestore - The Firestore instance for DB operations.
   * @param userService - The UserService providing user-related data and utilities.
   */
  constructor(private firestore: Firestore, private userService: UserService) {}

  /**
   * addChannel creates a new channel in Firestore, storing both &#x27;members&#x27; and &#x27;membersUid&#x27; (UID array).
   * After creation, it calls loadChannels to refresh local state and sets the newly created channel as current.
   *
   * @param channel - The channel object containing name, members, and optional description/createdBy fields.
   */
  async addChannel(channel: {
    name: string;
    members: any[];
    description?: string;
    createdBy?: string;
  }): Promise&lt;void&gt; {
    try {
      // 1) Ensure the creator (current user) is included in the members list
      await this.ensureCreatorInChannel(channel);

      // 2) Create the channel document in Firestore
      const docRef &#x3D; await this.createChannelDoc(channel);

      // 3) Construct the local channel object, refresh channels, and set this new one as current
      const newChannel &#x3D; this.buildNewChannelObj(channel, docRef.id);

      this.changeChannel(newChannel);
    } catch (error) {
      // Handle or log the error as needed
    }
  }

  /**
   * ensureCreatorInChannel checks if the current user (creator) is already in the channel&#x27;s members list.
   * If not, it loads the user&#x27;s data from Firestore and pushes that user object into channel.members.
   *
   * @private
   * @param channel - The partial channel object that might or might not contain the current user.
   */
  private async ensureCreatorInChannel(channel: {
    name: string;
    members: any[];
    description?: string;
    createdBy?: string;
  }): Promise&lt;void&gt; {
    const currentUid &#x3D; this.userService.getCurrentUserId();
    if (!currentUid) return;

    const alreadyHasCreator &#x3D; channel.members.some((m) &#x3D;&gt; m.uid &#x3D;&#x3D;&#x3D; currentUid);
    if (!alreadyHasCreator) {
      const userData &#x3D; await this.userService.getUserById(currentUid);
      channel.members.push({ uid: currentUid, ...userData });
    }
  }

  /** Creates the channel document in Firestore and returns the DocumentReference. */
  private async createChannelDoc(channel: {
    name: string;
    members: any[];
    description?: string;
    createdBy?: string;
  }) {
    const channelsColl &#x3D; collection(this.firestore, &#x27;channels&#x27;);
    const membersUid &#x3D; channel.members.map((m) &#x3D;&gt; m.uid);
    return await addDoc(channelsColl, { ...channel, membersUid });
  }

  /** Builds a local channel object with an &#x27;id&#x27; property included. */
  private buildNewChannelObj(
    channel: {
      name: string;
      members: any[];
      description?: string;
      createdBy?: string;
    },
    id: string
  ) {
    const membersUid &#x3D; channel.members.map((m) &#x3D;&gt; m.uid);
    return { id, ...channel, membersUid };
  }

  /**
   * leaveChannel allows the current user to remove themselves from a channel&#x27;s membership list.
   * If no members remain, the channel is deleted. This also updates Firestore fields &#x27;members&#x27;
   * and &#x27;membersUid&#x27;.
   *
   * @param channelId - The unique ID of the channel in Firestore.
   * @param userId - The UID of the user leaving the channel.
   */
  async leaveChannel(channelId: string, userId: string): Promise&lt;void&gt; {
    try {
      const channelDocRef &#x3D; doc(this.firestore, &#x27;channels&#x27;, channelId);
      const docSnap &#x3D; await getDoc(channelDocRef);
      if (!docSnap.exists()) return;
      await this.handleChannelLeaving(
        docSnap.data(),
        channelDocRef,
        channelId,
        userId
      );
    } catch (error) {
      throw error;
    }
  }

  /** Processes the logic of leaving a channel or deleting it if empty. */
  private async handleChannelLeaving(
    channelData: any,
    channelDocRef: any,
    channelId: string,
    userId: string
  ): Promise&lt;void&gt; {
    const { updatedMembers, updatedMembersUid } &#x3D; this.filterOutLeavingUser(
      channelData,
      userId
    );
    if (updatedMembers.length &gt; 0) {
      await updateDoc(channelDocRef, {
        members: updatedMembers,
        membersUid: updatedMembersUid,
      });
    } else {
      await deleteDoc(channelDocRef);
    }
    this.removeChannelLocally(channelId);
  }

  /** Filters the leaving user out of the existing members and membersUid arrays. */
  private filterOutLeavingUser(
    channelData: any,
    userId: string
  ): {
    updatedMembers: any[];
    updatedMembersUid: string[];
  } {
    const members &#x3D; channelData[&#x27;members&#x27;] || [];
    const membersUid &#x3D; channelData[&#x27;membersUid&#x27;] || [];
    const updatedMembers &#x3D; members.filter(
      (member: any) &#x3D;&gt; member.uid !&#x3D;&#x3D; userId
    );
    const updatedMembersUid &#x3D; membersUid.filter(
      (uid: string) &#x3D;&gt; uid !&#x3D;&#x3D; userId
    );
    return { updatedMembers, updatedMembersUid };
  }

  /**
   * setMembers merges new members with the existing membership in Firestore, updating
   * both the &#x27;members&#x27; array of objects and the &#x27;membersUid&#x27; array of UIDs. The local
   * channels list is also updated to reflect these changes.
   * @param channelId - The ID of the channel in Firestore.
   * @param newMembers - An array of the new members to add to the channel.
   */
  async setMembers(channelId: string, newMembers: any[]): Promise&lt;void&gt; {
    try {
      const channels &#x3D; this.channelsSource.getValue();
      const channelIndex &#x3D; channels.findIndex((c) &#x3D;&gt; c.id &#x3D;&#x3D;&#x3D; channelId);
      if (channelIndex &lt; 0) return;
      await this.mergeAndSaveMembers(
        channelId,
        newMembers,
        channels,
        channelIndex
      );
    } catch (error) {}
  }

  /** Merges old and new members, updates Firestore, and refreshes local state. */
  private async mergeAndSaveMembers(
    channelId: string,
    newMembers: any[],
    channels: any[],
    channelIndex: number
  ): Promise&lt;void&gt; {
    const channel &#x3D; channels[channelIndex];
    const channelDocRef &#x3D; doc(this.firestore, &#x27;channels&#x27;, channel.id);
    const channelDoc &#x3D; await getDoc(channelDocRef);
    const oldMembers &#x3D; channelDoc.exists()
      ? channelDoc.data()?.[&#x27;members&#x27;] || []
      : [];
    const updatedMembers &#x3D; this.combineOldAndNew(oldMembers, newMembers);
    const membersUid &#x3D; updatedMembers.map((m: any) &#x3D;&gt; m.uid);

    await updateDoc(channelDocRef, { members: updatedMembers, membersUid });
    channels[channelIndex] &#x3D; {
      ...channel,
      members: updatedMembers,
      membersUid,
    };
    this.channelsSource.next([...channels]);
    this.updateCurrentChannelIfNeeded(channelId, updatedMembers);
  }

  /** Combines old and new members without duplicates, based on the &#x27;uid&#x27; field. */
  private combineOldAndNew(oldMembers: any[], newMembers: any[]): any[] {
    return [
      ...oldMembers,
      ...newMembers.filter(
        (m) &#x3D;&gt;
          !oldMembers.some(
            (existing: { uid: string }) &#x3D;&gt; existing.uid &#x3D;&#x3D;&#x3D; m.uid
          )
      ),
    ];
  }

  /** If the current channel is the same as channelId, refresh its members locally. */
  private updateCurrentChannelIfNeeded(
    channelId: string,
    updatedMembers: any[]
  ): void {
    const currentChannel &#x3D; this.channelSource.getValue();
    if (currentChannel &amp;&amp; currentChannel.id &#x3D;&#x3D;&#x3D; channelId) {
      currentChannel.members &#x3D; updatedMembers;
      this.channelSource.next(currentChannel);
    }
  }

  /**
   * removeChannelLocally removes a channel from the local channelsSource by its ID,
   * useful after a channel has been deleted or the user has left it.
   * @param channelId - The ID of the channel to remove.
   */
  removeChannelLocally(channelId: string): void {
    const updatedChannels &#x3D; this.channelsSource
      .getValue()
      .filter((channel) &#x3D;&gt; channel.id !&#x3D;&#x3D; channelId);
    this.channelsSource.next(updatedChannels);
  }

  /**
   * updateLocalChannels overwrites the local channels array with a given array of channels.
   * @param updatedChannels - The new array of channels to store in channelsSource.
   */
  updateLocalChannels(updatedChannels: any[]): void {
    this.channelsSource.next(updatedChannels);
  }

  /**
   * updateChannel modifies the name and description of a specific channel in Firestore,
   * also updating local state in channelsSource.
   * @param channelId - The Firestore doc ID for the channel.
   * @param newChannelName - The updated channel name.
   * @param description - The updated channel description.
   */
  async updateChannel(
    channelId: string,
    newChannelName: string,
    description: string
  ): Promise&lt;void&gt; {
    try {
      const channels &#x3D; this.channelsSource.getValue();
      const index &#x3D; channels.findIndex((ch) &#x3D;&gt; ch.id &#x3D;&#x3D;&#x3D; channelId);
      if (index &#x3D;&#x3D;&#x3D; -1) return;

      this.applyChannelEdits(channels, index, newChannelName, description);
      await this.persistChannelEdits(channelId, newChannelName, description);
      this.channelsSource.next([...channels]);
    } catch (error) {
      throw error;
    }
  }

  /** Updates the in-memory channel object with the new name and description. */
  private applyChannelEdits(
    channels: any[],
    index: number,
    newName: string,
    desc: string
  ): void {
    channels[index].name &#x3D; newName;
    channels[index].description &#x3D; desc;
  }

  /** Persists the channel edits in Firestore using updateDoc. */
  private async persistChannelEdits(
    channelId: string,
    newName: string,
    desc: string
  ): Promise&lt;void&gt; {
    const channelDocRef &#x3D; doc(this.firestore, &#x27;channels&#x27;, channelId);
    await updateDoc(channelDocRef, { name: newName, description: desc });
  }

  /**
   * changeSelectedChannel updates a separate BehaviorSubject for a &quot;selected channel.&quot;
   */
  changeSelectedChannel(channel: {
    id: string;
    name: string;
    members: any[];
    description?: string;
    createdBy?: string;
  }) {
    this.selectedChannelSource.next(channel);
  }

  /**
   * changeChannel updates the channelSource, effectively indicating the user is working
   * with this channel as the &quot;current&quot; channel.
   */
  changeChannel(channel: {
    id: string;
    name: string;
    members: any[];
    description?: string;
    createdBy?: string;
  }) {
    this.channelSource.next(channel);
  }

  /**
   * getChannels returns the latest cached channel array from channelsSource synchronously.
   */
  getChannels(): {
    name: string;
    members: any[];
    description?: string;
    createdBy?: string;
  }[] {
    return this.channelsSource.getValue();
  }

  /**
   * getMembers returns the latest list of members from membersSource.
   */
  getMembers(): any[] {
    return this.membersSource.getValue();
  }

  /**
   * getMessages returns an observable that streams the messages for a given channel
   * ordered by ascending timestamp.
   * @param channelId - The Firestore channel ID to load messages from.
   */
  getMessages(channelId: string): Observable&lt;any[]&gt; {
    const messagesCollection &#x3D; collection(this.firestore, &#x27;messages&#x27;);
    const q &#x3D; query(
      messagesCollection,
      where(&#x27;channelId&#x27;, &#x27;&#x3D;&#x3D;&#x27;, channelId),
      orderBy(&#x27;timestamp&#x27;, &#x27;asc&#x27;)
    );
    return collectionData(q, { idField: &#x27;id&#x27; }) as Observable&lt;any[]&gt;;
  }

  /**
   * updateMessage allows editing the &#x27;content&#x27; of a message in Firestore for a specific channel.
   * The message doc is found by messageId, and updated content is stored alongside an edited timestamp.
   * @param channelId - The channel&#x27;s ID (used for logs/validation).
   * @param messageId - The Firestore doc ID of the message to update.
   * @param updatedContent - The new text/image/emoji content to store.
   */
  async updateMessage(
    channelId: string,
    messageId: string,
    updatedContent: { text?: string; image?: string | null; emojis?: any[] }
  ): Promise&lt;void&gt; {
    try {
      const messageDocRef &#x3D; doc(this.firestore, &#x27;messages&#x27;, messageId);
      await updateDoc(messageDocRef, {
        content: updatedContent,
        editedAt: serverTimestamp(),
      });
    } catch (error) {}
  }

  /**
   * saveLastUsedEmojis stores an array of last-used emojis in Firestore under either
   * &#x27;lastUsedEmojisSent&#x27; or &#x27;lastUsedEmojisReceived&#x27; for the given channel.
   * @param channelId - The Firestore doc ID of the channel.
   * @param lastUsedEmojis - An array of emoji strings (short or native).
   * @param type - Either &#x27;sent&#x27; or &#x27;received&#x27;, indicating which field to update.
   */
  async saveLastUsedEmojis(
    channelId: string,
    lastUsedEmojis: string[],
    type: &#x27;sent&#x27; | &#x27;received&#x27;
  ): Promise&lt;void&gt; {
    if (!channelId) return;

    const channelDocRef &#x3D; doc(this.firestore, &#x27;channels&#x27;, channelId);
    try {
      if (type &#x3D;&#x3D;&#x3D; &#x27;sent&#x27;) {
        await updateDoc(channelDocRef, { lastUsedEmojisSent: lastUsedEmojis });
      } else {
        await updateDoc(channelDocRef, {
          lastUsedEmojisReceived: lastUsedEmojis,
        });
      }
    } catch (error) {}
  }

  /**
   * getLastUsedEmojis retrieves either the &#x27;sent&#x27; or &#x27;received&#x27; last-used emojis array
   * from a given channel doc in Firestore.
   * @param channelId - The channel doc ID.
   * @param type - &#x27;sent&#x27; or &#x27;received&#x27; to select which field to read.
   */
  async getLastUsedEmojis(
    channelId: string,
    type: &#x27;sent&#x27; | &#x27;received&#x27;
  ): Promise&lt;string[] | undefined&gt; {
    if (!channelId) return;

    const channelDocRef &#x3D; doc(this.firestore, &#x27;channels&#x27;, channelId);
    const channelDoc &#x3D; await getDoc(channelDocRef);

    if (channelDoc.exists()) {
      const data &#x3D; channelDoc.data();
      return type &#x3D;&#x3D;&#x3D; &#x27;sent&#x27;
        ? data[&#x27;lastUsedEmojisSent&#x27;] || []
        : data[&#x27;lastUsedEmojisReceived&#x27;] || [];
    } else {
      return [];
    }
  }

  /**
   * deleteChannel removes a channel document from Firestore and updates local state,
   * typically used when a channel is no longer needed or an admin removes it.
   * @param channelId - The channel doc ID to delete.
   */
  async deleteChannel(channelId: string): Promise&lt;void&gt; {
    try {
      const channelDocRef &#x3D; doc(this.firestore, &#x27;channels&#x27;, channelId);
      await deleteDoc(channelDocRef);
      // Remove it from local BehaviorSubject
      this.removeChannelLocally(channelId);
    } catch (error) {}
  }

  /**
   * getAllChannels sets up a live snapshot listener on the channels collection,
   * firing a callback whenever there&#x27;s a change in Firestore&#x27;s channels data.
   * Returns an unsubscribe function to end the snapshot subscription.
   * @param callback - The function to call with the updated array of channels.
   */
  getAllChannels(callback: (channels: any[]) &#x3D;&gt; void): () &#x3D;&gt; void {
    const channelsCollection &#x3D; collection(this.firestore, &#x27;channels&#x27;);
    const unsubscribe &#x3D; onSnapshot(channelsCollection, (snapshot) &#x3D;&gt; {
      const channels: any[] &#x3D; [];
      snapshot.forEach((doc) &#x3D;&gt; {
        channels.push({ id: doc.id, ...doc.data() });
      });
      callback(channels);
    });
    return unsubscribe;
  }

  /**
   * Sets up a realtime listener on the &#x27;channels&#x27; collection in Firestore.
   * Whenever documents in this collection are created, updated, or deleted,
   * the provided callback function is invoked with the updated list of channels.
   *
   * @param {(channels: any[]) &#x3D;&gt; void} callback - A function that receives the current channel array on each Firestore update.
   * @returns {() &#x3D;&gt; void} - A function that, when called, unsubscribes from the Firestore listener.
   */

  public listenChannelsLive(callback: (channels: any[]) &#x3D;&gt; void): () &#x3D;&gt; void {
    const channelsColl &#x3D; collection(this.firestore, &#x27;channels&#x27;);
    const unsubscribe &#x3D; onSnapshot(channelsColl, (snapshot) &#x3D;&gt; {
      const channels: any[] &#x3D; [];
      snapshot.forEach((docSnap) &#x3D;&gt; {
        channels.push({ id: docSnap.id, ...docSnap.data() });
      });
      callback(channels);
    });
    return unsubscribe;
  }

  /**
   * getChannelById retrieves one channel document by ID from Firestore.
   * Throws an error if the channel doesn&#x27;t exist.
   * @param channelId - The Firestore doc ID of the channel.
   */
  async getChannelById(channelId: string): Promise&lt;any&gt; {
    const channelDocRef &#x3D; doc(this.firestore, &#x27;channels&#x27;, channelId);
    const channelDoc &#x3D; await getDoc(channelDocRef);

    if (channelDoc.exists()) {
      return { id: channelDoc.id, ...channelDoc.data() };
    } else {
      throw new Error(&#x27;Channel not found&#x27;);
    }
  }

  /**
   * getChannelsByName runs a Firestore query to find channels whose names start with
   * the given channelName, also ensuring that the current user is in the &#x27;membersUid&#x27;.
   * @param channelName - The partial or full string of the channel name to search.
   */
  async getChannelsByName(channelName: string): Promise&lt;any[]&gt; {
    const currentUserId &#x3D; this.userService.getCurrentUserId();
    if (!currentUserId) return [];
    const q &#x3D; this.buildChannelsByNameQuery(channelName, currentUserId);
    return await this.executeChannelsByNameQuery(q);
  }

  /** Builds the Firestore query for channels matching the given channelName and containing the current user. */
  private buildChannelsByNameQuery(channelName: string, userId: string) {
    const coll &#x3D; collection(this.firestore, &#x27;channels&#x27;);
    return query(
      coll,
      where(&#x27;name&#x27;, &#x27;&gt;&#x3D;&#x27;, channelName),
      where(&#x27;name&#x27;, &#x27;&lt;&#x3D;&#x27;, channelName + &#x27;\uf8ff&#x27;),
      where(&#x27;membersUid&#x27;, &#x27;array-contains&#x27;, userId)
    );
  }

  /** Executes the query and maps the results to an array of channel objects. */
  private async executeChannelsByNameQuery(q: any): Promise&lt;any[]&gt; {
    try {
      const snapshot &#x3D; await getDocs(q);
      return snapshot.docs.map((docSnap: any) &#x3D;&gt; ({
        id: docSnap.id,
        ...docSnap.data(),
      }));
    } catch (error) {
      return [];
    }
  }

  /**
   * getUsersByFirstLetter queries the &#x27;users&#x27; collection in Firestore for user documents
   * whose names start with the provided letter, returning them as an array.
   * @param firstLetter - The character or string to filter by (e.g. &#x27;A&#x27;).
   */
  async getUsersByFirstLetter(firstLetter: string): Promise&lt;any[]&gt; {
    const usersCollection &#x3D; collection(this.firestore, &#x27;users&#x27;);
    const q &#x3D; query(
      usersCollection,
      where(&#x27;name&#x27;, &#x27;&gt;&#x3D;&#x27;, firstLetter),
      where(&#x27;name&#x27;, &#x27;&lt;&#x3D;&#x27;, firstLetter + &#x27;\uf8ff&#x27;)
    );

    try {
      const querySnapshot &#x3D; await getDocs(q);
      const users &#x3D; querySnapshot.docs.map((doc) &#x3D;&gt; ({
        id: doc.id,
        ...doc.data(),
      }));
      return users;
    } catch (error) {
      return [];
    }
  }

  /**
   * getAllMessagesLive sets up a snapshot listener on the &#x27;messages&#x27; collection,
   * ordered by ascending timestamp, calling the provided callback with updated messages.
   * Returns an unsubscribe function to end the snapshot.
   * @param callback - The function that receives the new array of messages upon updates.
   */
  getAllMessagesLive(callback: (messages: any[]) &#x3D;&gt; void): () &#x3D;&gt; void {
    const messagesCollection &#x3D; collection(this.firestore, &#x27;messages&#x27;);
    const q &#x3D; query(messagesCollection, orderBy(&#x27;timestamp&#x27;, &#x27;asc&#x27;));

    const unsubscribe &#x3D; onSnapshot(q, (snapshot) &#x3D;&gt; {
      const messages: any[] &#x3D; [];
      snapshot.forEach((docSnap) &#x3D;&gt; {
        messages.push({ id: docSnap.id, ...docSnap.data() });
      });
      callback(messages);
    });
    return unsubscribe;
  }

  /**
   * Retrieves all channels from Firestore in which the current user is a member,
   * returning an array of channel objects once (no realtime updates).
   */
  async getAllChannelsOnce(): Promise&lt;any[]&gt; {
    const currentUserId &#x3D; this.userService.getCurrentUserId();
    if (!currentUserId) return [];

    const coll &#x3D; collection(this.firestore, &#x27;channels&#x27;);
    const qRef &#x3D; query(
      coll,
      where(&#x27;membersUid&#x27;, &#x27;array-contains&#x27;, currentUserId)
    );
    const snap &#x3D; await getDocs(qRef);
    return snap.docs.map((doc) &#x3D;&gt; ({ id: doc.id, ...doc.data() }));
  }

  /**
   * Checks if a channel with the specified name already exists in Firestore.
   * Returns true if at least one document has this name.
   * @param name The channel name to check.
   */
  async channelNameExists(name: string): Promise&lt;boolean&gt; {
    const channelsColl &#x3D; collection(this.firestore, &#x27;channels&#x27;);
    const qChannelName &#x3D; query(channelsColl, where(&#x27;name&#x27;, &#x27;&#x3D;&#x3D;&#x27;, name));
    const snap &#x3D; await getDocs(qChannelName);
    return !snap.empty;
  }

  /**
   * Returns a live observable of messages for the given channelId
   * from the top-level &#x27;messages&#x27; collection, ordered by ascending timestamp.
   * @param channelId The ID of the channel to observe.
   */
  public getChannelMessagesLive(channelId: string): Observable&lt;any[]&gt; {
    const messagesRef &#x3D; collection(this.firestore, &#x27;messages&#x27;);
    const q &#x3D; query(
      messagesRef,
      where(&#x27;channelId&#x27;, &#x27;&#x3D;&#x3D;&#x27;, channelId),
      orderBy(&#x27;timestamp&#x27;, &#x27;asc&#x27;)
    );
    return collectionData(q, { idField: &#x27;id&#x27; }) as Observable&lt;any[]&gt;;
  }
}
</code></pre>
    </div>

</div>













                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'ChannelService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script>
               $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               checkToggle(darkModeState);
               if ($darkModeToggleSwitchers.length > 0) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].addEventListener('change', function (event) {
                              darkModeState = !darkModeState;
                              toggleDarkMode(darkModeState);
                         });
                    }
               }
          </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
